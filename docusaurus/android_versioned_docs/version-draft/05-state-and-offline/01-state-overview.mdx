# State Plugin

The `StreamStatePluginFactory` has been separated from the `StreamOfflinePluginFactory` and now exists as a distinct, independent plugin factory.
This deliberate decision allows for better modularity and independent control over each plugin's functionalities.

Some flags, such as `backgroundSyncEnabled` and `userPresence` of the offline plugin's `Config` have been migrated to `StatePluginConfig`:

<Tabs>
<TabItem value="kotlin" label="Kotlin">

```kotlin
import io.getstream.chat.android.state.plugin.config.StatePluginConfig

//...

StatePluginConfig(
    // Enables the background sync which is performed to sync user actions done without the Internet connection.
    backgroundSyncEnabled = true,
    // Enables the ability to receive information about user activity such as last active date and if they are online right now.
    userPresence = true,
)
```

</TabItem>

<TabItem value="java" label="Java">

```java
import io.getstream.chat.android.state.plugin.config.StatePluginConfig;

//...

// Enable background sync which syncs user actions performed while offline
boolean backgroundSyncEnabled = true;
// Enable tracking online states for users
boolean userPresence = true;

StreamStatePluginFactory statePluginFactory = new StreamStatePluginFactory(
        new StatePluginConfig(
                backgroundSyncEnabled,
                userPresence
        ),
        context
);
```

</TabItem>
</Tabs>